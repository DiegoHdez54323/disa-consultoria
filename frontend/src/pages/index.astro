---
import BaseLayout from "../layouts/BaseLayout.astro";
import { HeroSection } from "../components/index/HeroSection";
import ServicesSection from "../components/index/ServicesSection.astro";
import BlogSection from "../components/index/BlogSection.astro";
import ContactSection from "../components/index/ContactSection.astro";
import PortfolioSection from "../components/index/PortfolioSection/PortfolioSection.astro";

import { getAllServices } from "../services/servicesService";
import type { Service } from "../sanity/types/services";
const allServices: Service[] = await getAllServices();

import { getAllPortfolioProjects } from "../services/portfolioService";
const portfolioProjects = await getAllPortfolioProjects();

import { getLatestBlogPosts } from "../services/blogService";
const latestBlogPosts = await getLatestBlogPosts();

const schema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  name: "DiSa Consultoría",
  url: "https://disaconsultoria.com",
  logo: "https://disaconsultoria.com/favicon.svg",
  description:
    "Expertos en desarrollo de software, aplicaciones web, móviles y consultoría tecnológica.",
  address: {
    "@type": "PostalAddress",
    addressCountry: "MX",
  },
};
---

<BaseLayout
  title="DiSa Consultoría | Desarrollo de Software y Transformación Digital"
  description="Expertos en desarrollo de software, aplicaciones web, móviles y consultoría tecnológica. Transformamos tu negocio con soluciones digitales a medida."
  canonicalURL={new URL("/", Astro.site)}
  ogType="website"
  schema={schema}
>
  <HeroSection client:load />
  <ServicesSection services={allServices} />
  <PortfolioSection projects={portfolioProjects} />
  <BlogSection posts={latestBlogPosts} />
  <ContactSection />
</BaseLayout>
